local wezterm = require 'wezterm'
local act = wezterm.action
local mux = wezterm.mux

local basename = function(s)
    return string.gsub(s, "(.*[/\\])(.*)", "%2")
end

wezterm.on('gui-startup', function(cmd)
    local args = {}
    if cmd then args = cmd.args end

    local home = wezterm.home_dir

    local m_tab, m_pane, window = mux.spawn_window {
        workspace = 'default',
        cwd = home
    }

--    window:gui_window():maximize()

--    local title = #window:tabs() .. basename(m_pane:foreground_process_name())
--    m_tab:set_title(title)

--    local dotfiles_tab = window:spawn_tab({
--       args = args,
--       cwd = home .. '/.dotfiles'
--    })
--    dotfiles_tab:set_title('dotfiles')
    window:gui_window():perform_action(act.ActivateTab(0), m_pane)
end)

return {}
